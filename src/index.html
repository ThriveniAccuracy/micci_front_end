<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SMART MEMBERSHIP</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="./assets/fonts/font-awesome.min.css">

  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css'>
<!-- <link rel="stylesheet" href="./style.css"> -->

  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> -->

  <script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>

  <!-- <link rel="stylesheet" type="text/css" href="assets/styles/custom-style.css"/> -->
  <link rel="stylesheet" href="https://unpkg.com/ngx-bootstrap/datepicker/bs-datepicker.css">
  <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
  crossorigin="anonymous"> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script> -->
  <!-- <link href="https://fonts.googleapis.com/css2?family=Muli:wght@300&family=Raleway:wght@100;300&display=swap" rel="stylesheet">  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Hahmlet&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/@coreui/coreui@3.0.0-rc.0/dist/css/coreui.min.css">
  <!-- <script  src="https://kit.fontawesome.com/a076d05399.js"></script> -->

  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
  <app-root></app-root>
  <script src="assets/js/jquery-1.12.4.min.js"></script>
  <!-- Latest compiled and minified Bootstrap -->
    <!-- <script src="assets/bootstrap/js/bootstrap.min.js"></script> -->
  <!-- modernizer JS -->		
    <script src="assets/js/modernizr-2.8.3.min.js"></script>														
  <!-- stellar js -->
    <script src="assets/js/jquery.stellar.min.js"></script>				
  <!-- owl-carousel min js  -->
    <!-- <script src="assets/owlcarousel/js/owl.carousel.min.js"></script> -->
  <!-- MAGNIFICANT JS -->
    <script src="assets/js/jquery.magnific-popup.min.js"></script>	
  <!-- scrolltopcontrol js -->
    <script src="assets/js/scrolltopcontrol.js"></script>	
          
  <!-- form-contact js -->
    <script src="assets/js/form-contact.js"></script>	
  <!-- WOW - Reveal Animations When You Scroll -->
    <script src="assets/js/wow.min.js"></script>				
  <!-- scripts js -->
    <script src="assets/js/scripts.js"></script>

  <script src= "https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
  <script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script>
    (function(i, s, o, g, r, a, m) {
              i['GoogleAnalyticsObject'] = r;
              i[r] = i[r] || function() {
                  (i[r].q = i[r].q || []).push(arguments)
              }, i[r].l = 1 * new Date();
              a = s.createElement(o),
                  m = s.getElementsByTagName(o)[0];
              a.async = 1;
              a.src = g;
              m.parentNode.insertBefore(a, m)
          })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-175260361-1', 'auto');// add your tracking ID here.
  ga('send', 'pageview');
  </script>
  <script>
    
    function w3_open() {
      document.getElementById("mySidebar").style.display = "block";
    }
    
    function w3_close() {
      document.getElementById("mySidebar").style.display = "none";
    }


    </script>
       <div class="l_c_h">
        <div class="c_h">
            <div class="left_c">
                  <!-- <div class="left right_c left_icons">
                         <a href="#" class="mini" style="font-size:23px;">+</a>
                  </div> -->
                  
                  <div class="left center_icons" style="color: black; background: antiquewhite; border: purple;"><!--center_icons-->
                    <!-- <a href="#" class="mini" style="font-size:23px;">+</a> -->
                    <img src="./assets/smart_agent.jpeg"  alt="Responsive image" style=" background-color: red;"  width="300" height="70"
   >
                  </div><!--end center_icons-->        	
              </div>
              <div class="right right_c" style="width:35px;">
                <a href="#" class="logout" title="End chat" name="" style="display:none;"><img src="chat/logout.png"></a>        	
              </div>
              <div class="clear"></div>
          </div>
          <!-- <hr class="style1" style="color: black;"> -->
          <div class="chat_container" id="bodybox" style="display: none;">
          <p class="no_provider txt" style="font-size: larger;">
               
            <strong>
              Kindly fill the form to start chatting !
            </strong> 
                  </p>
          
        <div class="chat_message" style="display: none; overflow-wrap: break-word;">
          <input type="hidden" class="my_user" value="">
                </div>
          <div class="chat_text_area" style="display:none;">
                <textarea name="messag_send" class="messag_send" id="messag_send" placeholder="Enter Your Message and press CTRL"></textarea>
              </div>
            <div class="chat_entry txt" style="overflow-wrap: break-word;">
                   <form name="chat_form" class="chat_form has-validation-callback" id="chat_form" onsubmit="return false;">
                    <p>
                        <input type="text" style="border-radius: 2rem; height: 40px;" data-validation="required" name="user_chat" id="firstname" class="user_chat" placeholder="Enter Your Name" required>
                        <!-- <input type="hidden" name="id" class="id" value="4919738359">
                        <input type="hidden" name="web" class="web" value="webaddress/"> -->
                    </p>
                    <p>
                        <input type="text" style="border-radius: 2rem; height: 40px;" data-validation="email" name="email_chat" id="lastname" class="email_chat" placeholder="Enter Your Email" required>
                    </p>
                    <p>
                        <input type="text" style="border-radius: 2rem; height: 40px;" data-validation="number" name="number_chat" id="email" class="number_chat" placeholder="Enter Your Number" required>
                    </p>
                    <p style="text-align:left;">
                      <input type="submit" style="border-radius: 2rem; width: 330px; color: black; height: 40px;" name="chat_submit" class="chat_submit" id="callback" onClick="myFunctionfirt()" value="Start Chat" required>
                    </p>
                  </form>
              </div>
              <div class="frame pb-8">
      
        <div class="chatOptions">
            <div class="desc-text" style="font-size: larger;"></div>
          
            <div style="overflow-y: auto; height: 400px; overflow-anchor: end;" id="scroll">
                <div style="width: 310px;" id="popcode" ></div>
            
            </div>
          
          
            <div class="msj-rta macro pt-3" style="margin:auto;  overflow-wrap: break-word;" >                        
                <div class="text text-r" style="background:ffbca2 !important;" id="hiddenenene">
  
                    <form name="myForm" class="chat_form has-validation-callback" onsubmit="return false;"> 
                     
    
                      <div class="input-group  position: fixed;
                      left: 0;
                      bottom: 0;
                      width: 100%;
                      background-color: red;
                      color: white;
                      text-align: center;">
                        <input type="text" class="form-control" id="chat_box" name="user" placeholder="Type your query..." aria-label="Recipient's username" style="font-size: larger; border-radius: 2rem;" required>
                        <button class="btn btn-outline-success" type="button" id="button-addon2" onClick="myFunction()" style="font-size: larger; border-radius: 2rem">Submit</button>
                      </div>
  
               <!-- <input class="mytext" placeholder="Type a message" id="chat_box" name="user" style="width: 500px;" autofocus="true" /> -->
               
                <!-- <button class="btn btn-success" type="submit" onClick="myFunction()">Start Chat</button> -->
            </form>
          
                </div> 
            </div>
        </div>
    </div>  
            
  
          </div>
      </div>
  


    <script>
      // window.setInterval(function() {
  var elem = document.getElementById('scroll');
  elem.scrollTop = elem.scrollHeight;
// }, 00);

    </script>
    <script>
      $("#popcode").scrollTop($("#popcode")[0].scrollHeight);
    </script>
<script>
  jQuery( document ).ready(function() {
console.log
  jQuery(".txt").show();
  jQuery(".chatOptions").hide();
    jQuery("#callback").click(function(){
    jQuery(".txt").hide();
    jQuery("#callback").hide();
    jQuery(".chatOptions").show();

   });
});
    $(function(){
      $(".c_h").click(function(e) {
               if ($(".chat_container").is(":visible")) {
                   $(".c_h .right_c .mini").text("+")
               } else {
                   $(".c_h .right_c .mini").text("-")
               }
               $(".chat_container").slideToggle("slow");
               return false
           });
   });
   function myFunction() {
  var data = $('#chat_box').val()
  document.myForm.reset();
  if(data.startsWith("BOOKINGID=")) {
    $.post("https://cmabackend.seekerstops.com/chatbot_text",
    { user: data},
    function(data,status){
      console.log(data.data.length)
      if(data.data.length === 0) {
        $('#popcode').append('<div class="text-danger chatX m-3 p-3" style="font-size: 15px;" id="bodybox">' + "BOT :  " + "Kindly provide correct booking id. In this format BOOKINGID=your id will go here (BOOKINGID=XXXXXX) " + '</div>');
      }
          else {    console.log(data.data)
     $('#popcode').append(`<div class="chatX m-3 p-3 text-danger" id="bodybox" style="font-size: 15px;"> Booking Details: <li>Booking ID: ${data.data[0].booking_id} </li> 
                                          <li> Booking Name: ${data.data[0].booking_name}</li> 
                                          <li> Check-in Date: ${data.data[0].checkindate}</li>
                                          <li> Check-out Date: ${data.data[0].checkoutdate}</li> 
                                          <li> Room type: ${data.data[0].room_type}</li>
                                          <li> Total Rooms: ${data.data[0].rooms}</li> 
                                              <li> Contact No: ${data.data[0].mobile}</li>
                                          </div>`);}
    //  document.getElementById("popcode2").innerHTML =data.data;
    });
    var elem = document.getElementById('scroll');
  elem.scrollTop = elem.scrollHeight;

  }

else {
//erro4r   generate
var nid =  Cookies.get("userId")

var fNAME = Cookies.get("firstname")

if (data === "1" || data === "2" || data === "3" || data === "4" || data === "5" || data === "6"|| data === "7") {
                 
                    document.cookie = `question=${data}`
                }
                var question = Cookies.get("question")
                // var question = document.cookie;
            // var Fname = $.cookie('firstname');
          console.log(question)
  // var question = $.cookie('question');
console.log(nid)
    $.post("https://cmabackend.seekerstops.com/chatbot_text",
    { user: data,
    id: nid,
    question:question
  },
    function(data,status){
     console.log(data)
     if (data.data.includes("VGI")) {
      $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + data.data + '</div>');
      jQuery("#adminHide").hide();
      var elem = document.getElementById('scroll');
  elem.scrollTop = elem.scrollHeight;
    
     }
     else if (data.data === "membership") {
      $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + "Kindly reply one of these.." + '</div>');
      $('#popcode').append('<div class="chatX m-3 p-3 text-success" id="bodybox" style="font-size: 15px;">' + "Who can apply new membership ?" + '</div>');
      $('#popcode').append('<div class="chatX m-3 p-3 text-success" id="bodybox" style="font-size: 15px;">' + "When can I apply ?" + '</div>');
      $('#popcode').append('<div class="chatX m-3 p-3 text-success" id="bodybox" style="font-size: 15px;">' + "How can I apply  ?" + '</div>');
      // jQuery("#adminHide").hide();
      var elem = document.getElementById('scroll');
  elem.scrollTop = elem.scrollHeight;
    
     }
     else if (data.membership === "membership" ){
      // $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + "Kindly reply with any of the followings .." + '</div>');
      
      $('#popcode').append(`<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">
        <p>Kindly reply with any of the followings ..</p>
        <ul>
        <li>Weather the fee can be paid in the particular country currency or in Indian Rs?</li>
        <li class="pt-1">What is the fee for a new Membership?</li>
        <li class="pt-1">What is the process to pay the fee?</li>
        <li class="pt-1">How will I receive the invoice?</li>
        <li class="pt-1">What is the fee for Annual renewal of the membership for Associate Member?</li>
        <li class="pt-1">What is the fee for Annual renewal of the membership for Fellow Member?</li>
        <li class="pt-1">Contact information for further discussion on fee related issues?</li>
        </ul>
        </div>`);

      // $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + "Weather the fee can be paid in the particular country currency or in Indian Rs?" + '</div>');
      // $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + "What is the process to pay the fee?:" + '</div>');
      // $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + "How will I receive the invoice?" + '</div>');
      // $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + "What is the fee for Annual renewal of the membership for Associate Member?" + '</div>');
      // $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + "What is the fee for Annual renewal of the membership for Fellow Member?" + '</div>');
      // $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + "Contact information for further discussion on fee related issues?" + '</div>');
      var elem = document.getElementById('scroll');
  elem.scrollTop = elem.scrollHeight;

     }
     else {
      $('#popcode').append('<div class="chatX m-3 p-3 text-primary" id="bodybox" style="font-size: 15px;">' + "BOT :  " + data.data + '</div>');
      var elem = document.getElementById('scroll');
  elem.scrollTop = elem.scrollHeight;
 }
     
    //  document.getElementById("popcode2").innerHTML =data.data;
    });

console.log(data)
$('#popcode').append('<div class="text-success chatX m-3 p-3 m" id="bodybox" style="font-size: 15px;">'  + fNAME + " :  " +  data + '</div>');
// document.getElementById("popcode").innerHTML = `<p> $data </p>`;
var elem = document.getElementById('scroll');
  elem.scrollTop = elem.scrollHeight;
}

}

// UUID


function myFunctionfirt() {

  var val = Math.floor(1000 + Math.random() * 9000);
  console.log(val);
  document.cookie = `userId=${val}`
// $.cookie("userId", val)
  var firstname = $('#firstname').val()
  var lastname = $('#lastname').val()
  var email = $('#email').val()
  document.cookie = `firstname=${firstname}`


  if(!firstname || !lastname || !email) {
  alert("All fields are required!!!")
  document.location.href="/";
}
  // $.cookie('name',name);
  $('#popcode').append('<div class="chatX m-2 p-3" style="font-size: 15px;" id="bodybox">' + "BOT :  " + "Kindly wait for the bot reply..........!!"+ '</div>');
  $.post("https://cmabackend.seekerstops.com/chatbot_info",
    { user: firstname,
      luser: lastname,
     lemail: email,
      id: val 
    },
    function(data,status){
     console.log(data)

     $('#popcode').append('<div class="chatX ml-2 p-3" style="font-weight: bold; font-size: 15px;" id="bodybox">' + "BOT :  " + data.data + '</div>');
    //  document.getElementById("popcode2").innerHTML =data.data;
    $('#popcode').append('<div class="chatX ml-2 p-3" style="font-size: 15px;" id="bodybox">' +  "1. Membership" + '</div>');
                        $('#popcode').append('<div class="chatX ml-2 p-3" style="font-size: 15px;" id="bodybox">' +  "2. Fees Structures" + '</div>');
                         $('#popcode').append('<div class="chatX ml-2 p-3" style="font-size: 15px;" id="bodybox">' +  "3. CMA Courses" + '</div>');
                         $('#popcode').append('<div class="chatX ml-2 p-3" style="font-size: 15px;" id="bodybox">' + "4. International courses details" + '</div>');
                        $('#popcode').append('<div class="chatX ml-2 p-3" style="font-size: 15px;" id="bodybox">' +  "5. Election Related Questions" + '</div>');
                         $('#popcode').append('<div class="chatX ml-2 p-3" style="font-size: 15px;" id="bodybox">' +  "6. Singapore Overseas center " + '</div>');

                         var elem = document.getElementById('scroll');
                elem.scrollTop = elem.scrollHeight;
    });

// console.log(data)
// $('#popcode').append('<div>'  + "USER :  " +  data + '</div>');
// document.getElementById("popcode").innerHTML = `<p> $data </p>`;

}

  </script>

<script>
  var input = document.getElementById("chat_box");
  input.addEventListener("keyup", function(event) {
   
    if (event.keyCode === 13) {
  
     document.getElementById("button-addon2").click();
    }
  });
  </script>


  <script>
    function hideFeild() {
      var checkboxes = $("input[type='checkbox']"),
        actions = $("#hiddenField");
      actions.attr("hidden", checkboxes.is(":checked"));
    }
  </script>

</body>
</html>
